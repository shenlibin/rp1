### 第一章



### 第二章 类加载



### 第三章 运行时数据区

 



#### 05 虚拟机栈

内存中的栈与堆,栈是运行时单位,堆是存储的单位

##### 栈

每个线程都会创建一个虚拟机栈,内部保存一个个栈帧(StackFrame),对应这一次次的Java方法调用,是线程私有的

​	生命周期和线程一致

​	作用:主管Java程序的运行,保存方法的局部变量,部分结果,并参与调用和返回,决定了能调用方法的深度。

​	优点:一种快速有效的分配储存方式,速度仅次于程序计数器

​		JVM直接对Java栈操作只有入栈(每个方法执行),出栈(方法结束)
​		不存在垃圾回收问题

​	通过设置-Xss参数,来设置每个线程的栈内存大小

​    不同线程之间的栈帧不能互相引用

​    java有2种方法弹出栈,return 或者抛出异常。

##### 栈帧

###### 局部变量表(Local Variables)

​	包括了,形参,局部变量(基本类型,对象引用),大小多少决定了方法被调用的深度

​	表的单个储存单位(Slot/变量槽),32位以内的类型只占一个,64位的类型占2个(long,double)

​	基本类型byte ,short ,char,boolean 也被转成int

​	构造方法/实例方法 会将当前对象this放在index为0的slot处

​	slot可以重复利用,当前面的局部变量过了作用域,后面申明的变量会重复使用之前变量的槽

​	局部变量表中的变量也是重要的垃圾回收根节点,只要被局部变量表中直接或间接引用的对象都不会被回收。

###### 操作数栈(Operand Stack/表达式栈)

​	 主要用于保存计算过程中的结果,同事作为计算过程中变量临时的存储空间。

​	操作数栈就是JVM执行引擎的工作区,当方法开始执行时被创建出来,刚开始栈是空的,长度在编译时已经确定。

​	栈中的元素32位以内的类型只占一个栈单位深度,64位的类型占2个栈单位深度

​	只能通过push和pop操作来完成数据访问。

###### 动态链接(Dynamic Linking/指向运行时常量池的方法引用)

​	{

​		静态链接:如果被调用的目标方法在编译期可知,且运行期保持不变,这种情况下将调用方法的符号引用转换为直接引用的过程称之为静态链接(例如调用static方法和final方法)

​		动态链接:反之无法在编译期被确定下来,只能在运行期将调用方法的符号引用转换为直接引用,由于这种引用转换过程具备动态性,因此也就被称为动态链接(涉及到父类或接口的抽象或者重写方法)

​	}	

​	

###### 方法返回地址(Return Address/正常或者异常退出的定义)

​	

一些附加信息





 	







